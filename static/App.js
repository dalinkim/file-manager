!function(e){function t(t){for(var r,l,i=t[0],u=t[1],c=t[2],f=0,d=[];f<i.length;f++)l=i[f],o[l]&&d.push(o[l][0]),o[l]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(s&&s(t);d.length;)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,i=1;i<n.length;i++){var u=n[i];0!==o[u]&&(r=!1)}r&&(a.splice(t--,1),e=l(l.s=n[0]))}return e}var r={},o={0:0},a=[];function l(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=r,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(n,r,function(t){return e[t]}.bind(null,r));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var i=window.webpackJsonp=window.webpackJsonp||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var s=u;a.push([9,1]),n()}({9:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(1),l=n.n(a);n(3);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var d=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(r=c(t).call(this))||"object"!==i(r)&&"function"!=typeof r?f(n):r).handleSubmit=e.handleSubmit.bind(f(f(e))),e}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,o.a.Component),n=t,(r=[{key:"handleSubmit",value:function(e){e.preventDefault();var t=document.forms.pathSet;this.props.setPath({dirPath:t.url.value}),t.url.value=""}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("p",null,o.a.createElement("b",null,"Directory Lookup: "),o.a.createElement("br",null),"Enter an absolute or a relative directory path (w.r.t. current working directory) to display the directory content.",o.a.createElement("br",null),"Default path is './server' when the server starts."),o.a.createElement("form",{name:"pathSet",onSubmit:this.handleSubmit},o.a.createElement("input",{type:"text",name:"url",placeholder:"Enter path"}),o.a.createElement("button",null,"Open Directory")))}}])&&u(n.prototype,r),a&&u(n,a),t}();function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(r=h(t).call(this))||"object"!==y(r)&&"function"!=typeof r?b(n):r).handleAdd=e.handleAdd.bind(b(b(e))),e.handleSubmit=e.handleSubmit.bind(b(b(e))),e}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,o.a.Component),n=t,(r=[{key:"handleAdd",value:function(e){e.preventDefault();var t=document.forms.keyword;this.props.addKeyword(t.keyword.value),t.keyword.value=""}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.organizeByKeywords()}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("p",null,o.a.createElement("b",null,"Organize by Keyword(s):"),o.a.createElement("br",null),"Add a keyword to create a new directory and move the matching files. Multiple keywords can be added.",o.a.createElement("br",null)),o.a.createElement("form",{name:"keyword",onSubmit:this.handleAdd},o.a.createElement("input",{type:"text",name:"keyword",placeholder:"Keyword to sort"}),o.a.createElement("button",null,"Add Keyword")),o.a.createElement("p",null,"Click 'Submit' to organize. It will take a moment to extract file contents and make necessary changes to the directory.",o.a.createElement("br",null),o.a.createElement("button",{onClick:this.handleSubmit},"Submit")))}}])&&p(n.prototype,r),a&&p(n,a),t}();function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var P=function(e){return o.a.createElement("tr",null,o.a.createElement("td",null,e.file.dirPath),o.a.createElement("td",null,e.file.fileName),o.a.createElement("td",{style:{textAlign:"right"}},e.file.fileType),o.a.createElement("td",{style:{textAlign:"right"}},Math.ceil(e.file.fileSize/1e3).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" KB"))},k=function(e){var t=e.files.map(function(e){return o.a.createElement(P,{key:e.filePath,file:e})});return o.a.createElement("div",null,o.a.createElement("p",null,o.a.createElement("b",null,"Content Display:"),o.a.createElement("br",null),"Table lists all files in the following directory path: ",o.a.createElement("i",null,e.dirPath),o.a.createElement("br",null),o.a.createElement("small",null,"Note: Hidden files/directories are ignored.",o.a.createElement("br",null))),o.a.createElement("table",{className:"bordered-table"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Path"),o.a.createElement("th",null,"Name"),o.a.createElement("th",null,"Type"),o.a.createElement("th",null,"Size"))),o.a.createElement("tbody",null,t)))},j=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(r=g(t).call(this))||"object"!==w(r)&&"function"!=typeof r?O(n):r).state={files:[],keywords:[],dirPath:""},e.setPath=e.setPath.bind(O(O(e))),e.addKeyword=e.addKeyword.bind(O(O(e))),e.organizeByKeywords=e.organizeByKeywords.bind(O(O(e))),e}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;fetch("/api/files").then(function(t){t.ok?t.json().then(function(t){e.setState({files:t.records}),e.setState({dirPath:t.dirPath})}):t.json().then(function(e){alert("Failed to load data:\n"+e.message)})}).catch(function(e){alert("Error in fetching data from server:\n"+e.message)})}},{key:"setPath",value:function(e){var t=this;fetch("/api/path",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){e.ok?e.json().then(function(e){t.setState({files:e.records}),t.setState({dirPath:e.dirPath})}):e.json().then(function(e){alert("Failed to set path:\n"+e.message)})}).catch(function(e){alert("Error in sending data to server:\n"+e.message)})}},{key:"organizeByKeywords",value:function(){var e=this;fetch("/api/keywords",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keywords:this.state.keywords,dirPath:this.state.dirPath})}).then(function(t){t.ok?t.json().then(function(t){e.setState({files:t.records}),e.setState({dirPath:t.dirPath}),e.setState({keywords:[]})}):t.json().then(function(e){alert("Failed to sort by keywords: \n"+e.message)})}).catch(function(e){alert("Error in sending data to server: "+e.message)})}},{key:"addKeyword",value:function(e){var t=this.state.keywords.concat(e);this.setState({keywords:t})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("hr",null),o.a.createElement(d,{setPath:this.setPath}),o.a.createElement("hr",null),o.a.createElement(v,{organizeByKeywords:this.organizeByKeywords,addKeyword:this.addKeyword}),o.a.createElement("ul",null,this.state.keywords.map(function(e){return o.a.createElement("li",null,e)})),o.a.createElement("hr",null),o.a.createElement(k,{files:this.state.files,dirPath:this.state.dirPath}))}}])&&E(n.prototype,r),a&&E(n,a),t}(),_=document.getElementById("contents");l.a.render(o.a.createElement(j,null),_)}});